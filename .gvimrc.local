if has("gui_macvim")
  set nowrap
  set enc=utf-8
  set fuoptions=maxvert,maxhorz
  set guifont=Monaco:h13
  set columns=179
  set lines=50
  set guioptions=aAce
  set complete-=i
  set foldmethod=manual
  set foldlevel=99
  set noballooneval
  set expandtab
  set textwidth=0 wrapmargin=0

  let mapleader=","
  let g:mapleader = ","

  " Close the NERDTree on startup (The Air has a tiny screen!)
   NERDTreeClose

  colorscheme jellybeans

  hi LineNr guifg=#333333 guibg=#151515

  autocmd BufWritePre *.rb :%s/\s\+$//e
  autocmd BufWritePre *.haml :%s/\s\+$//e
  autocmd BufWritePre *.html :%s/\s\+$//e
  autocmd BufWritePre *.scss :%s/\s\+$//e
  autocmd BufWritePre *.coffee :%s/\s\+$//e

  au BufNewFile * set noeol

  " Indent file
  map   <silent> <F5> mmgg=G`m^
  imap  <silent> <F5> <Esc> mmgg=G`m^

  " Command+Option+Right for next
  map <D-M-Right> :tabn<CR>
  " Command+Option+Left for previous
  map <D-M-Left> :tabp<CR>

  " Tab to NERDTree
  noremap <tab> <c-w><c-w>

  " resize current buffer by +/- 5
  nnoremap <D-left> :vertical resize -5<cr>
  nnoremap <D-down> :resize +5<cr>
  nnoremap <D-up> :resize -5<cr>
  nnoremap <D-right> :vertical resize +5<cr>

  " jump to the next row on long lines
  nnoremap j gj
  nnoremap k gk

  " Switch between buffers
  noremap <leader>n :bn<CR>
  noremap <leader>p :bp<CR>

  " Close buffer
  nmap <leader>d :bprevious<CR>:bdelete #<CR>

  " Switch between last two buffers
  nnoremap <leader><leader> <C-^>

  " Map ESC
  imap jj <ESC>

  " Highlight long lines
  highlight OverLength guibg=#373737
  match OverLength /\%81v.\+/

  " Highlighting for Gdiff (vimdiff)
  hi DiffAdd guibg=#C2DF44 guifg=#000000
  hi DiffText guibg=#81C8F5 guifg=#000000
  hi DiffChange guibg=#363636 guifg=#555555
  hi DiffDelete guibg=#C7412C

  " Disable indenting with F8
  nnoremap <F8> :setl noai nocin nosi inde=<CR>

  " Reload the vim config
  nmap <F3> :so ~/.gvimrc.local<CR>
end
